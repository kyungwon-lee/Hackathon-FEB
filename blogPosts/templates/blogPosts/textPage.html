{% extends 'base.html' %}
{% load static %}

{% block content %}
  <body class="text-body">
    <div id="cursor">
      <img id="cursor-img" src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDgwLjAyNTU3IDQ4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNDc0LjY3MTg3NSAyMzIuNDUzMTI1LTY2LjU1NDY4Ny0yMy4yODkwNjNjLTI2LjU1ODU5NC05LjI5Njg3NC01NS43NDYwOTQtNy40MzM1OTMtODAuOTEwMTU3IDUuMTYwMTU3LTI1LjE2MDE1NiAxMi41OTc2NTYtNDQuMTQ0NTMxIDM0Ljg0NzY1Ni01Mi42MTcxODcgNjEuNjc5Njg3bC0xNy40MTQwNjMgNTUuMTQ0NTMyLTE3LjE0NDUzMSAxMi44NTU0Njh2LTExNS4xNjAxNTZjLS4wMTk1MzEtMTUuMzQ3NjU2IDcuNjU2MjUtMjkuNjg3NSAyMC40Mzc1LTM4LjE4MzU5NGwtOC44Nzg5MDYtMTMuMzEyNWMtMTcuMjM0Mzc1IDExLjQ2NDg0NC0yNy41ODIwMzIgMzAuNzk2ODc1LTI3LjU1ODU5NCA1MS40OTYwOTR2MTUuODQ3NjU2bC0xMC4zNDM3NS0xMC4zNDM3NS0xMS4zMTI1IDExLjMxMjUgMjEuNjU2MjUgMjEuNjU2MjV2MTc1Ljc0MjE4OGwtMTYtOHYtMTYuNDU3MDMyYy0uMDAzOTA2LTQwLjI0MjE4Ny0xOS4zNTE1NjItNzguMDM1MTU2LTUyLTEwMS41NjY0MDYtMzIuNjUyMzQ0LTIzLjUyNzM0NC03NC42MjEwOTQtMjkuOTI5Njg3LTExMi44MDA3ODEtMTcuMTk5MjE4bC0zNy43MjY1NjMgMTIuNTc0MjE4Yy0zLjI4NTE1NiAxLjA4MjAzMi01LjUwMzkwNiA0LjE0NDUzMi01LjUwMzkwNiA3LjYwMTU2M3MyLjIxODc1IDYuNTE5NTMxIDUuNTAzOTA2IDcuNjAxNTYybDguNTY2NDA2IDIuODU1NDY5YzQxLjA2MjUgMTMuNjUyMzQ0IDc5LjM3ODkwNyAzNC40ODgyODEgMTEzLjE2MDE1NyA2MS41MzUxNTZsNjcuODAwNzgxIDU0LjIzODI4MmMuNDU3MDMxLjMyMDMxMi45NTMxMjUuNTg5ODQzIDEuNDcyNjU2LjgwMDc4MWwtLjA1MDc4MS4xMDU0NjkgMjcuNTc4MTI1IDEzLjgwMDc4MXYxOS4wNTQ2ODdoMTZ2LTExNmwyOC43OTY4NzUtMjEuNjAxNTYyLS4wODU5MzctLjEwOTM3NWMuMzI4MTI0LS4xOTE0MDcuNjQ0NTMxLS40MDIzNDQuOTQ1MzEyLS42MzI4MTMgNTAuNjYwMTU2LTUwLjQ5NjA5NCAxMTYuNjM2NzE5LTgyLjc2NTYyNSAxODcuNTk3NjU2LTkxLjc1MzkwNmwxNS43MzgyODItMS45NjQ4NDRjMy42ODM1OTMtLjQ2NDg0NCA2LjU2MjUtMy40MDIzNDQgNi45NTcwMzEtNy4wOTM3NXMtMS44MDQ2ODgtNy4xNjc5NjgtNS4zMDg1OTQtOC4zOTQ1MzF6bTAgMCIgZmlsbD0iIzNkNzYwNiIvPjxwYXRoIGQ9Im0zMDcuNzgxMjUgNjcuNzUzOTA2LTMuNzUtNjAuMjQ2MDk0Yy0uMjM4MjgxLTMuNzg5MDYyLTMuMTA1NDY5LTYuODkwNjI0LTYuODY3MTg4LTcuNDI1NzgwOC0zLjc1LS41MDAwMDAyLTcuMzQ3NjU2IDEuNjc1NzgwOC04LjY0NDUzMSA1LjIzNDM3NDhsLTI1Ljg3NSA3Mi40MTQwNjNjLTkuNjc1NzgxIDI3LjA1MDc4MS0xNC42MjEwOTMgNTUuNTY2NDA2LTE0LjYxMzI4MSA4NC4yOTY4NzV2MjEuOTc2NTYyYzAgMy4yMzQzNzUgMS45NDkyMTkgNi4xNTIzNDQgNC45Mzc1IDcuMzkwNjI1IDIuOTg4MjgxIDEuMjM0Mzc1IDYuNDI5Njg4LjU1MDc4MSA4LjcxODc1LTEuNzM0Mzc1IDMyLjEzMjgxMi0zMi4xNDQ1MzEgNDguOTIxODc1LTc2LjUzOTA2MiA0Ni4wOTM3NS0xMjEuOTA2MjV6bTAgMCIgZmlsbD0iIzVmYTgxOSIvPjxwYXRoIGQ9Im0xMTkuNDkyMTg4IDEwNi4wNTA3ODEtNTIuOTMzNTk0LTE3LjU5NzY1NmMtMi43MzQzNzUtLjkxNDA2My01Ljc1LS4yODUxNTYtNy44OTQ1MzIgMS42NDQ1MzEtMi4xNDA2MjQgMS45MzM1OTQtMy4wNzgxMjQgNC44NjcxODgtMi40NDkyMTggNy42ODM1OTRsOC44MDA3ODEgMzkuNjk1MzEyYzE0LjA4OTg0NCA2NC43Njk1MzIgNzEuNTcwMzEzIDExMC44NTE1NjMgMTM3Ljg1NTQ2OSAxMTAuNTI3MzQ0aDUuMTYwMTU2YzQuNDE3OTY5IDAgOC0zLjU4MjAzMSA4LTggLjA1MDc4MS02MC43ODkwNjItMzguODU1NDY5LTExNC43Njk1MzEtOTYuNTM5MDYyLTEzMy45NTMxMjV6bTAgMCIgZmlsbD0iIzVmYTgxOSIvPjxnIGZpbGw9IiM1ODljMTciPjxwYXRoIGQ9Im0xNTguODI4MTI1IDIxMi44MDQ2ODhjLTMwLjY1NjI1LTE4Ljg2NzE4OC01NS43ODUxNTYtNDUuNDkyMTg4LTcyLjg1NTQ2OS03Ny4xODM1OTRsLTI1LjIzMDQ2OC00Ni44NzVjLTMuNDg4MjgyIDEuNTAzOTA2LTUuMzk4NDM4IDUuMjkyOTY4LTQuNTI3MzQ0IDguOTkyMTg3bDguODAwNzgxIDM5LjY5NTMxM2MxNC4wNzQyMTkgNjQuNzg5MDYyIDcxLjU1ODU5NCAxMTAuODkwNjI1IDEzNy44NTU0NjkgMTEwLjU3MDMxMmg1LjE2MDE1NmMxLjgyMDMxMi0uMDMxMjUgMy41NzAzMTItLjY5MTQwNiA0Ljk1NzAzMS0xLjg3MTA5NHptMCAwIi8+PHBhdGggZD0ibTMyOS43NzM0MzggMjY5LjYwMTU2MmMtMTYuODU1NDY5IDEyLjAzNTE1Ny0zMC4xNzk2ODggMjguMzYzMjgyLTM4LjU4OTg0NCA0Ny4yODkwNjNsLTMuNjk5MjE5IDguMzIwMzEzYzQ4LjAyMzQzNy00MS4xNjQwNjMgMTA3LjA1NDY4Ny02Ny4zNTE1NjMgMTY5LjgwMDc4MS03NS4zMjAzMTNsMTUuMjQyMTg4LTEuODg2NzE5aC03NS4zMTI1Yy0yNC4xODM1OTQtLjAwNzgxMi00Ny43NjE3MTkgNy41NDY4NzUtNjcuNDQxNDA2IDIxLjU5NzY1NnptMCAwIi8+PHBhdGggZD0ibTIwNC4yMjI2NTYgNDUxLjA0Mjk2OS0uMTYwMTU2LS44Nzg5MDdjLTE1LjkxMDE1Ni04Ny41MTU2MjQtOTUuNTUwNzgxLTE0OC43MzQzNzQtMTg0LjIxNDg0NC0xNDEuNjAxNTYybC0zLjcyMjY1Ni4yOTY4NzUtMTAuNjIxMDk0IDMuNTQyOTY5Yy0zLjI4NTE1NiAxLjA4MjAzMS01LjUwMzkwNiA0LjE0NDUzMS01LjUwMzkwNiA3LjYwMTU2MiAwIDMuNDU3MDMyIDIuMjE4NzUgNi41MTk1MzIgNS41MDM5MDYgNy41OTc2NTZsOC41NjY0MDYgMi44NTkzNzZjNDEuMDYyNSAxMy42NTYyNSA3OS4zNzg5MDcgMzQuNDkyMTg3IDExMy4xNjAxNTcgNjEuNTQyOTY4bDY3LjgwMDc4MSA1NC4yMzgyODJjLjQ1NzAzMS4zMjAzMTIuOTUzMTI1LjU4OTg0MyAxLjQ3MjY1Ni44MDA3ODFsLS4wNTA3ODEuMTA1NDY5em0wIDAiLz48L2c+PC9zdmc+" />
    </div>

    <div class="container">

      <div class = "homeMiddle">
        <div class = "search">
          <div class = "search_inside">
            <div class = "magnifying-icon">
              <img src="{%static 'blogPosts/img/magnifying_glass2.png'%}" />
            </div>
            <div class="search_input">
              <form autocomplete="off">
                <div class="autocomplete" style="width:300px;">
                  <input href="javascript:;" onclick="load_titles({{titles}}, {{categoryId}}, {{rId}});" id="myInput" type="text" name="myCountry" placeholder="검색어를 입력해주세요.">
                </div>
                <input type="submit" style="display:none;">
              </form>
            </div>
          </div>
        </div>
      </div>
      <nav class="sub-nav">
        <ol class="breadcrumbs">
          <li title="금융">
            <a href = 'http://127.0.0.1:8000/' >  {{post.section}}</a>
          </li>
          <li title="주식">
            <a href = 'http://127.0.0.1:8000/mainPage/{{sections.data_id}}'>{{post.sub_section}}</a>
          </li> 
        </ol>
      </nav>
    
      <div class="article-container">
        <section class="sidebar">
          <h3>{{user.profile.email}}님을 위한 추천 글</h3>
          <ul>
            {%for interest_post in interest_posts_inorder_top_ten %}
            <li>
              <a href = "http://127.0.0.1:8000/mainPage/{{interest_id}}/post/{{interest_post.id}}/" class="list-item">[{{interest_post.section}}] {{interest_post.title}}</a>
              {% comment %} <a href = "/mainPage/{{interest_id}}/post/{{interest_post.id}}" class="list-item">[{{interest_post.section}}] {{interest_post.title}}</a> {% endcomment %}
            </li>
            {% endfor %}
          </ul>
        </section>
          <article class="article">
            <header class="article-header">
              <h1 class="article-title">[{{post.section}}] {{post.title}}</h1>
            </header>
            
          <table class="main_selector" align="center" width="100%">
            <td id="article-sub-title">
              <span>{{post.brief_description}}</span>
            </td>
            <td align="center">
              <button type="button" class="back" onClick="change_src('http://127.0.0.1:8000/mainPage/text3/{{post.id}}/')">
                <div class="button_base
                b02_slide_in">
                  <div>력사 보기</div>
                  <div></div>
                  <div>력사 보기</div>
                </div>
              </button>
              <!-- <button type="button" class="navyBtn" onClick="change_src('http://127.0.0.1:8000/blogPosts/text3/')">력사 보기 -->
            </td>
                    
            <td align="center">
              <button type="button" class="back" onClick="change_src('http://127.0.0.1:8000/mainPage/text2/{{post.id}}/')">
                <div class="button_base
                b02_slide_in">
                  <div>편집</div>
                  <div></div>
                  <div>편집</div>
                </div>
              </button>
                <!-- <button type="button" class="navyBtn" onClick="change_src('http://127.0.0.1:8000/blogPosts/text2/')">편집 -->
            </td>
                    
            <td align="center">
              <button type="button" class="back" onClick="change_src('http://127.0.0.1:8000/mainPage/text1/{{post.id}}')">
                <div class="button_base
                b02_slide_in">
                  <div>읽기</div>
                  <div></div>
                  <div>읽기</div>
                </div>
              </button>
              <!-- <button type="button" class="navyBtn" onClick="change_src('http://127.0.0.1:8000/blogPosts/text1/')">읽기 -->
            </td>
          </table>

          <iframe id='my_frame' src='http://127.0.0.1:8000/mainPage/text1/{{post.id}}' style="width:100%; height:600px; border:none;"></iframe>
        
          <footer>
            <div class="article-footer">
              <div class="article-share">
                <ul class="share">
                  <li>
                    <a href>
                      <img src="{%static 'blogPosts/img/facebook.svg'%}" />
                    </a>
                  </li>
                  <li>
                    <a href>
                      <img src="{%static 'blogPosts/img/instagram.svg'%}" />
                    </a>
                  </li>
                  <li>
                    <a href>
                      <img src="{%static 'blogPosts/img/twitter.svg'%}" />
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="article-votes">
              <span class="article-votes-question">도움이 되었습니까?</span>
              <div class="article-votes-controls">
                <a class="realButton" onclick="onClickLikeButton({{post.id}}, {{post.rid}})" id="{{post.id}}-like-button">예</a>
                <a class="realButton" onclick="onClickDislikeButton({{post.id}})" id="{{post.id}}-dislike-button">아니오</a>
              <br>
              <small class="article-votes-count" id = "{{post.id}}-votes-count">
                <span class="article-vote-label">{{post.like_dislike.count}} 명 중 {{post.get_total_like}} 명은 도움이 되었다고 했습니다.</span>
              </small>

            <div class="article-review">
              <h2 id = "commentset-num">
                게시판 후기&nbsp;<em>({{post.comment_set.count}})</em>
              </h2>

              <div class="rv-1st">
                <div class="user-info">
                  <span class="img">
                    <div class="profile">
                      <img src = {{user.profile.profile_image.url}}>
                    </div>
                  </span>
                  <div class="txt">
                    <span class="username">{{user.profile.email}}</span>
                  </div>
                </div>
                {% csrf_token %}
                <div class="content">
                  <div class="content-input">
                    <input name = "content" id="review-input-type" type="text" placeholder="댓글을 달아달아 밝은달아"/>
                  </div>
                  <button onclick = "onAddComment({{post.id}})" id="review-input-btn">리뷰작성</button>
                </div>
              </div>
            
            <div id = "comment_list">
              <div id = "async_comment">
              </div>
              {% for comment in comments %}
                <ul class="review-1st" id="post{{post.id}}-comment{{comment.id}}">
                  <li class="1st">
                    <div class="user-info">
                      <span class="img">
                        <div class="profile">
                          <img src = {{user.profile.profile_image.url}}>
                        </div>
                      </span>
                      <div class="txt">
                        <span class="username">{{ comment.author.profile.email }}</span>
                        <p class="date">{{ comment.created_at }}</p>
                      </div>
                    </div>
                    <div class="content">
                      <p> {{ comment.content }} </p>
                    </div>
                    <div class="btn-box">
                      <button class="likebtn" type="button">0</button>
                      <span class="reply">0</button>
                    </div>
                    {% if request.user == comment.author %}
                      <button onclick="onDeleteComment({{post.id}},{{comment.id}})">댓글 삭제</button>
                    {% endif %}
                  </li>
                </ul>
              {% endfor %}
            </div>
              <div class="page-num">
                <a class="page l"></a>
                <a class="active">1</a>
                <a class="page r"></a>
              </div>
          </footer>
        </article>
      </div>
    </div>
  </body>
{% endblock content%}